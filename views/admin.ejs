<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h1>Welcome, <%= user.username %></h1>
  <h2>Your API Keys</h2>
  <form action="/admin/keys/generate" method="POST">
    <button type="submit">Generate New API Key</button>
  </form>
  <table>
    <tr>
      <th>API Key</th>
      <th>Created</th>
      <th>Last Used</th>
      <th>Usage Count</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
    <% keys.forEach(key => { %>
      <tr>
        <td><%= key.api_key %></td>
        <td><%= key.created_at %></td>
        <td><%= key.last_used || 'Never' %></td>
        <td><%= key.usage_count %></td>
        <td><%= key.is_active ? 'Active' : 'Revoked' %></td>
        <td>
          <% if (key.is_active) { %>
            <form action="/admin/keys/<%= key.id %>/revoke" method="POST">
              <button type="submit">Revoke</button>
            </form>
          <% } %>
        </td>
      </tr>
    <% }) %>
  </table>
</body>
</html>